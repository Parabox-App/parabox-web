{"version":3,"file":"menu-surface.js","sourceRoot":"","sources":["menu-surface.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright 2022 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\n// Style preference for leading underscores.\n// tslint:disable:strip-private-property-underscore\n\n// TODO(b/239222919): remove compat dependencies\nimport {observer} from '@material/web/compat/base/observer.js';\nimport {deepActiveElementPath, doesElementContainFocus} from '@material/web/compat/base/utils.js';\nimport {html, LitElement} from 'lit';\nimport {property, query, state} from 'lit/decorators.js';\nimport {classMap} from 'lit/directives/class-map.js';\nimport {styleMap} from 'lit/directives/style-map.js';\n\nimport {MDCMenuSurfaceAdapter} from './adapter.js';\nimport {Corner as CornerEnum} from './constants.js';\nimport {MDCMenuSurfaceFoundation} from './foundation.js';\n\nexport type Corner = keyof typeof CornerEnum;\nexport type AnchorableElement = HTMLElement&{anchor: Element | null};\n\n// tslint:disable:no-bitwise\n\n// required for closure compiler\nconst stringToCorner = {\n  'TOP_LEFT': CornerEnum.TOP_LEFT,\n  'TOP_RIGHT': CornerEnum.TOP_RIGHT,\n  'BOTTOM_LEFT': CornerEnum.BOTTOM_LEFT,\n  'BOTTOM_RIGHT': CornerEnum.BOTTOM_RIGHT,\n  'TOP_START': CornerEnum.TOP_START,\n  'TOP_END': CornerEnum.TOP_END,\n  'BOTTOM_START': CornerEnum.BOTTOM_START,\n  'BOTTOM_END': CornerEnum.BOTTOM_END,\n};\n\n/**\n * @fires opened\n * @fires closed\n */\nexport abstract class MenuSurface extends LitElement {\n  protected mdcFoundation!: MDCMenuSurfaceFoundation;\n\n  @query('.md3-menu-surface') mdcRoot!: HTMLDivElement;\n\n  @query('slot') slotElement!: HTMLSlotElement|null;\n\n  @property({type: Boolean})\n  @observer(function(this: MenuSurface, isAbsolute: boolean) {\n    if (this.mdcFoundation && !this.fixed) {\n      this.mdcFoundation.setIsHoisted(isAbsolute);\n    }\n  })\n  absolute = false;\n\n  @property({type: Boolean}) fullwidth = false;\n\n  @property({type: Boolean})\n  @observer(function(this: MenuSurface, isFixed: boolean) {\n    if (this.mdcFoundation && !this.absolute) {\n      this.mdcFoundation.setFixedPosition(isFixed);\n    }\n  })\n  fixed = false;\n\n  @property({type: Number})\n  @observer(function(this: MenuSurface, value: number|null) {\n    if (this.mdcFoundation && this.y !== null && value !== null) {\n      this.mdcFoundation.setAbsolutePosition(value, this.y);\n      this.mdcFoundation.setAnchorMargin(\n          {left: value, top: this.y, right: -value, bottom: this.y});\n    }\n  })\n  x: number|null = null;\n\n  @property({type: Number})\n  @observer(function(this: MenuSurface, value: number|null) {\n    if (this.mdcFoundation && this.x !== null && value !== null) {\n      this.mdcFoundation.setAbsolutePosition(this.x, value);\n      this.mdcFoundation.setAnchorMargin(\n          {left: this.x, top: value, right: -this.x, bottom: value});\n    }\n  })\n  y: number|null = null;\n\n  // must be defined before open or else race condition in foundation occurs.\n  @property({type: Boolean})\n  @observer(function(this: MenuSurface, value: boolean) {\n    if (this.mdcFoundation) {\n      this.mdcFoundation.setQuickOpen(value);\n    }\n  })\n  quick = false;\n\n  @property({type: Boolean, reflect: true})\n  @observer(function(this: MenuSurface, isOpen: boolean, wasOpen: boolean) {\n    if (this.mdcFoundation) {\n      if (isOpen) {\n        this.mdcFoundation.open();\n        // wasOpen helps with first render (when it is `undefined`) perf\n      } else if (wasOpen !== undefined) {\n        this.mdcFoundation.close(this.skipRestoreFocus);\n      }\n    }\n  })\n  open = false;\n\n  @property({type: Boolean}) stayOpenOnBodyClick = false;\n\n  @property({type: Boolean}) skipRestoreFocus = false;\n\n  @state()\n  @observer(function(this: MenuSurface, value: CornerEnum) {\n    if (this.mdcFoundation) {\n      if (value) {\n        this.mdcFoundation.setAnchorCorner(value);\n      } else {\n        this.mdcFoundation.setAnchorCorner(value);\n      }\n    }\n  })\n  protected bitwiseCorner: CornerEnum = CornerEnum.TOP_START;\n\n  protected previousFlipMenuHorizontally = false;\n\n  /**\n   * Whether to align the menu surface to the opposite side of the default\n   * alignment.\n   */\n  @observer(function(this: MenuSurface, flipMenuHorizontally: boolean) {\n    if (!this.mdcFoundation) return;\n\n    if (this.previousFlipMenuHorizontally !== flipMenuHorizontally) {\n      this.mdcFoundation.flipCornerHorizontally();\n    }\n    this.previousFlipMenuHorizontally = flipMenuHorizontally;\n  })\n  @property({type: Boolean})\n  flipMenuHorizontally = false;\n\n  @property({type: String})\n  @observer(function(this: MenuSurface, value: Corner) {\n    if (this.mdcFoundation) {\n      if (value) {\n        this.bitwiseCorner = stringToCorner[value];\n      }\n    }\n  })\n  corner: Corner = 'BOTTOM_START';\n\n  @state() protected styleTop = '';\n  @state() protected styleLeft = '';\n  @state() protected styleRight = '';\n  @state() protected styleBottom = '';\n  @state() protected styleMaxHeight = '';\n  @state() protected styleTransformOrigin = '';\n\n  anchor: HTMLElement|null = null;\n\n  protected previouslyFocused: HTMLElement|Element|null = null;\n  protected previousAnchor: HTMLElement|null = null;\n  protected onBodyClickBound: (evt: MouseEvent) => void = () => undefined;\n\n  override render() {\n    const classes = {\n      'md3-menu-surface--fixed': this.fixed,\n      'md3-menu-surface--fullwidth': this.fullwidth,\n    };\n\n    const styles = {\n      'top': this.styleTop,\n      'left': this.styleLeft,\n      'right': this.styleRight,\n      'bottom': this.styleBottom,\n      'max-height': this.styleMaxHeight,\n      'transform-origin': this.styleTransformOrigin,\n    };\n\n    return html`\n      <div\n          class=\"md3-menu-surface ${classMap(classes)}\"\n          style=\"${styleMap(styles)}\"\n          @keydown=${this.onKeydown}\n          @opened=${this.registerBodyClick}\n          @closed=${this.deregisterBodyClick}>\n        <slot></slot>\n      </div>`;\n  }\n\n  protected override firstUpdated() {\n    if (this.mdcFoundation !== undefined) {\n      this.mdcFoundation.destroy();\n    }\n\n    this.mdcFoundation = new MDCMenuSurfaceFoundation(this.createAdapter());\n    this.mdcFoundation.init();\n  }\n\n  createAdapter(): MDCMenuSurfaceAdapter {\n    return {\n      addClass: (className: string) => {\n        this.mdcRoot.classList.add(className);\n      },\n      removeClass: (className: string) => {\n        this.mdcRoot.classList.remove(className);\n      },\n      hasClass: (className: string) =>\n          this.mdcRoot.classList.contains(className),\n      hasAnchor: () => {\n        return !!this.anchor;\n      },\n      notifyClose: () => {\n        const init: CustomEventInit = {bubbles: true, composed: true};\n        const ev = new CustomEvent('closed', init);\n        this.open = false;\n        this.mdcRoot.dispatchEvent(ev);\n      },\n      notifyClosing: () => {\n        const init: CustomEventInit = {bubbles: true, composed: true};\n        const ev = new CustomEvent('closing', init);\n        this.mdcRoot.dispatchEvent(ev);\n      },\n      notifyOpen: () => {\n        const init: CustomEventInit = {bubbles: true, composed: true};\n        const ev = new CustomEvent('opened', init);\n        this.open = true;\n        this.mdcRoot.dispatchEvent(ev);\n      },\n      notifyOpening: () => {\n        const init: CustomEventInit = {bubbles: true, composed: true};\n        const ev = new CustomEvent('opening', init);\n        this.mdcRoot.dispatchEvent(ev);\n      },\n      isElementInContainer: () => false,\n      isRtl: () => {\n        if (this.mdcRoot) {\n          return getComputedStyle(this.mdcRoot).direction === 'rtl';\n        }\n\n        return false;\n      },\n      setTransformOrigin: (origin) => {\n        const root = this.mdcRoot;\n        if (!root) {\n          return;\n        }\n\n        this.styleTransformOrigin = origin;\n      },\n      isFocused: () => {\n        return doesElementContainFocus(this);\n      },\n      saveFocus: () => {\n        const activeElementPath = deepActiveElementPath();\n        const pathLength = activeElementPath.length;\n\n        if (!pathLength) {\n          this.previouslyFocused = null;\n        }\n\n        this.previouslyFocused = activeElementPath[pathLength - 1];\n      },\n      restoreFocus: () => {\n        if (!this.previouslyFocused) {\n          return;\n        }\n\n        if ('focus' in this.previouslyFocused) {\n          this.previouslyFocused.focus();\n        }\n      },\n      getInnerDimensions: () => {\n        const mdcRoot = this.mdcRoot;\n\n        if (!mdcRoot) {\n          return {width: 0, height: 0};\n        }\n\n        return {width: mdcRoot.offsetWidth, height: mdcRoot.offsetHeight};\n      },\n      getAnchorDimensions: () => {\n        const anchorElement = this.anchor;\n\n        return anchorElement ? anchorElement.getBoundingClientRect() : null;\n      },\n      getBodyDimensions: () => {\n        return {\n          width: document.body.clientWidth,\n          height: document.body.clientHeight,\n        };\n      },\n      getWindowDimensions: () => {\n        return {\n          width: window.innerWidth,\n          height: window.innerHeight,\n        };\n      },\n      getWindowScroll: () => {\n        return {\n          x: window.pageXOffset,\n          y: window.pageYOffset,\n        };\n      },\n      setPosition: (position) => {\n        const mdcRoot = this.mdcRoot;\n\n        if (!mdcRoot) {\n          return;\n        }\n\n        this.styleLeft = 'left' in position ? `${position.left}px` : '';\n        this.styleRight = 'right' in position ? `${position.right}px` : '';\n        this.styleTop = 'top' in position ? `${position.top}px` : '';\n        this.styleBottom = 'bottom' in position ? `${position.bottom}px` : '';\n      },\n      setMaxHeight: async (height) => {\n        const mdcRoot = this.mdcRoot;\n\n        if (!mdcRoot) {\n          return;\n        }\n\n        // must set both for IE support as IE will not set a var\n        this.styleMaxHeight = height;\n        await this.updateComplete;\n        this.styleMaxHeight = `var(--md3-menu-max-height, ${height})`;\n      },\n    };\n  }\n\n  protected onKeydown(evt: KeyboardEvent) {\n    if (this.mdcFoundation) {\n      this.mdcFoundation.handleKeydown(evt);\n    }\n  }\n\n  protected onBodyClick(evt: MouseEvent) {\n    if (this.stayOpenOnBodyClick) {\n      return;\n    }\n    const path = evt.composedPath();\n    if (path.indexOf(this) === -1) {\n      this.close();\n    }\n  }\n\n  protected registerBodyClick() {\n    this.onBodyClickBound = this.onBodyClick.bind(this);\n    // capture otherwise listener closes menu after quick menu opens\n    document.body.addEventListener(\n        'click', this.onBodyClickBound, {passive: true, capture: true});\n  }\n\n  protected deregisterBodyClick() {\n    document.body.removeEventListener(\n        'click', this.onBodyClickBound, {capture: true});\n  }\n\n  close() {\n    this.open = false;\n  }\n\n  show() {\n    this.open = true;\n  }\n}\n"]}